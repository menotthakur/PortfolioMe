{{ define "main" }}
<div class="max-w-4xl">
  <!-- Header row: title + RSS button (Arpit-style) -->
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4">
    <h1 class="font-serif-italic text-4xl font-semibold text-gray-900 leading-tight">
      Blogs
      <span class="text-lg font-normal text-gray-400 ml-3">
        ({{ len .Pages }} posts)
      </span>
    </h1>
    <a href="/blog/index.xml" class="inline-flex items-center px-4 py-2 rounded border border-accent text-sm font-medium text-accent bg-white hover:bg-accent hover:text-white transition-colors">
      Subscribe RSS Feed
    </a>
  </div>

  <p class="text-base text-gray-600 mb-8">
    Every week I document my learnings around DevOps, cloud infrastructure, Kubernetes, and engineering practices.
  </p>

  <!-- Tags filter -->
  {{ $allTags := slice }}
  {{ range .Pages }}
    {{ range .Params.tags }}
      {{ $allTags = $allTags | append . }}
    {{ end }}
  {{ end }}
  {{ $uniqueTags := uniq $allTags }}
  
  {{ if $uniqueTags }}
  <div class="mb-8 flex flex-wrap gap-2">
    {{ range $uniqueTags }}
    <a href="/tags/{{ . | urlize }}/" class="text-sm px-4 py-1.5 bg-gray-100 hover:bg-accent hover:text-white rounded-full transition-all font-medium text-gray-600">
      {{ . }}
    </a>
    {{ end }}
  </div>
  {{ end }}

  <!-- Blog posts list -->
  <div class="space-y-1">
    {{ range .Pages.ByDate.Reverse }}
    <div class="flex items-baseline py-3 border-b border-gray-100 hover:bg-accent/5 transition-colors -mx-4 px-4 rounded-lg">
      <span class="text-sm text-gray-400 w-28 flex-shrink-0">
        {{ .Date.Format "Jan 02, 2006" }}
      </span>
      <a href="{{ .Permalink }}" class="text-base text-accent hover:underline font-medium flex-1">
        {{ .Title }}
      </a>
    </div>
    {{ else }}
    <p class="text-gray-500">No blog posts yet. Check back soon!</p>
    {{ end }}
  </div>
</div>
{{ end }}
